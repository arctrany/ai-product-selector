# 浏览器插件兼容性修复

## 问题
- 浏览器插件在程序运行时失效
- 程序强制重启浏览器导致插件状态丢失

## 解决方案
1. **优化浏览器启动参数**
   - 添加 `--enable-extensions`
   - 添加 `--load-extension-keep-alive`
   - 添加 `--disable-extensions-file-access-check`

2. **智能重启机制**
   - 给用户5秒时间手动关闭浏览器
   - 避免强制关闭导致插件状态丢失

3. **用户数据目录保护**
   - 使用真实用户配置目录而非临时目录
   - 保持插件和设置完整性

4. **修复代码错误**
   - 修复 `subprocess` 模块导入作用域问题
   - 清理重复导入语句

## 结果
- ✅ 插件正常工作
- ✅ 程序运行稳定
- ✅ 用户设置保持完整