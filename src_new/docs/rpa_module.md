# Role

作为高级软件架构师，您将协助我将浏览器自动化工具迁移到新的架构中。

# Objective

将现有的浏览器自动化工具从 `src/playwright` 迁移到 `src_new/rpa/browser`，并重构为更好的模块化架构。

# Requirements

## 1. 分析阶段

- 深入分析 `src/playwright` 目录中的代码结构和架构设计
- 识别现有模块的职责和依赖关系
- 评估当前实现的优缺点

## 2. 架构设计

- 将代码重构为多个合理的模块，确保：
    - 高可维护性和可扩展性
    - 跨平台兼容性（Windows/macOS/Linux）
    - 清晰的模块边界和职责分离
    - 无资源泄漏和性能问题
    - 遵循SOLID原则

## 3. 实施计划

- 在开始编码前与我讨论详细的重构计划
- 在 `src_new/rpa/browser` 目录中实施新架构
- 确保向后兼容性和平滑迁移路径

## 4. 测试策略

- 在 `src_new/tests/rpa/browser` 目录中编写全面的测试用例，和对应的源码位置保持对齐
- 确保测试覆盖率达到90%以上
- 包含单元测试、集成测试和端到端测试
- 测试结构与源码目录保持一致

## 5. 文档输出

- 编写详细的模块API文档,文档输出在 `docs/rpa/browser` 目录
- 提供迁移指南和使用示例
- 包含架构决策记录（ADR）

# Constraints

- **严禁修改** `src/playwright` 目录中的任何文件
- **严禁功能遗漏**  不能遗漏原来的功能
- **严禁依赖**  不能依赖`src` 目录中的任何文件和代码

- 遵循最佳编码实践：
    - 避免硬编码，使用配置文件
    - 采用清晰的命名约定
    - 提供完整的代码注释和文档
    - 实现全面的错误处理
    - 确保代码的可测试性

# Success Criteria

- 新模块架构清晰，职责明确
- 功能完整，不能遗漏
- 所有功能正常工作，性能不低于原实现
- 测试覆盖率达标，所有测试通过
- 文档完整，易于理解和维护