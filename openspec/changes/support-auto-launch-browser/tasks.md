## 阶段 1：SimplifiedBrowserService 修改 (P0)
- [x] 1.1 移除 `initialize()` 方法中的强制连接检查代码
- [x] 1.2 添加启动浏览器的逻辑分支（连接 vs 启动）
- [x] 1.3 完善错误处理和日志输出
- [x] 1.4 确保 `_launch_browser()` 被正确调用

## 阶段 2：XuanpingBrowserService 修改 (P0)
- [x] 2.1 修改 `_create_browser_config()` 方法支持自动启动模式
- [x] 2.2 移除所有"请手动启动浏览器"的错误提示
- [x] 2.3 添加 headless 模式配置支持
- [x] 2.4 添加启动模式配置（connect_to_existing=False）
- [x] 2.5 优化日志输出（区分启动模式和连接模式）

## 阶段 3：严格测试验证 (P0)

### 3.1 功能测试
- [x] 3.1.1 启动模式：浏览器未运行 → 自动启动成功
- [x] 3.1.2 启动模式：使用正确的 Profile（有登录态）
- [x] 3.1.3 启动模式：扩展正确加载
- [x] 3.1.4 启动模式：登录态保留验证（检查 cookies）
- [x] 3.1.5 连接模式：浏览器已运行 → 自动连接成功
- [x] 3.1.6 连接模式：扩展可用
- [x] 3.1.7 连接模式：登录态保留

### 3.2 Profile 锁定测试
- [x] 3.2.1 Default Profile 被占用 → 提示用户关闭浏览器
- [x] 3.2.2 用户关闭浏览器后 → 成功启动
- [x] 3.2.3 启动后验证 CDP 调试端口可用

### 3.3 跨平台和浏览器测试
- [x] 3.3.1 macOS + Edge 启动模式
- [x] 3.3.2 macOS + Edge 连接模式
- [x] 3.3.3 macOS + Chrome 启动模式
- [x] 3.3.4 macOS + Chrome 连接模式
- [ ] 3.3.5 Windows + Edge 启动模式
- [ ] 3.3.6 Windows + Edge 连接模式
- [ ] 3.3.7 Windows + Chrome 启动模式
- [ ] 3.3.8 Windows + Chrome 连接模式
- [ ] 3.3.9 Linux + Chrome 启动模式
- [ ] 3.3.10 Linux + Chrome 连接模式

### 3.4 边界情况测试
- [x] 3.4.1 浏览器启动失败（权限问题）
- [x] 3.4.2 调试端口被占用（9222）
- [ ] 3.4.3 用户数据目录不存在
- [ ] 3.4.4 Profile 损坏
- [x] 3.4.5 Profile 被占用（提示用户关闭）
- [ ] 3.4.6 网络问题导致连接失败
- [ ] 3.4.7 浏览器崩溃恢复
- [x] 3.4.8 CDP 调试端口连接测试

### 3.5 性能测试
- [ ] 3.5.1 启动时间 < 5 秒
- [ ] 3.5.2 内存占用合理
- [ ] 3.5.3 多次启动/关闭无内存泄漏

### 3.6 并发测试
- [ ] 3.6.1 多个脚本同时运行
- [ ] 3.6.2 Profile 隔离正确
- [ ] 3.6.3 无资源竞争

### 3.7 登录态验证测试
- [ ] 3.7.1 seerfar.cn 登录态保留
- [ ] 3.7.2 www.maozierp.com 登录态保留
- [ ] 3.7.3 Cookies 正确读取
- [ ] 3.7.4 Session Storage 保留

### 3.8 扩展功能测试
- [ ] 3.8.1 扩展列表正确
- [ ] 3.8.2 扩展可以执行操作
- [ ] 3.8.3 扩展设置保留

## 阶段 4：文档和清理 (P1)
- [x] 4.1 更新注释
- [x] 4.2 清理无用代码
- [x] 4.3 Git 提交代码
- [x] 4.4 更新 proposal.md（补充浏览器支持说明）
- [x] 4.5 修正 Profile 锁定解决方案
- [x] 4.6 添加 CDP 调试端口支持说明
- [x] 4.7 修复 spec.md 符合 OpenSpec 规范
