# 多源私域知识库

## 架构概览

本项目支持多种私域知识源的统一检索和管理：

```
私域知识架构
├── Deep-Wiki (优先级 1)         # 阿里巴巴内部 Wiki 系统
├── MCP 服务 (优先级 2)          # Model Context Protocol 知识服务
└── 本地文档 (优先级 3)          # 本地备份和项目特定文档
```

## 配置文件

### 核心配置
- `knowledge-sources.yml` - 知识源配置和检索策略
- `.env.example` - 环境变量配置示例

### 目录结构
```
domain-knowledge/
├── README.md                    # 本文件
├── knowledge-sources.yml       # 知识源配置
├── .env.example                # 环境变量示例
├── local-docs/                 # 本地文档备份
│   ├── alibaba-standards/       # 阿里巴巴技术标准
│   ├── team-experience/         # 团队经验库
│   ├── internal-components/     # 内部组件库
│   └── project-specific/        # 项目特定知识
└── cache/                      # 检索结果缓存 (自动生成)
```

## 使用方式

### 1. 环境配置
```bash
# 复制环境变量配置文件
cp .specify/memory/domain-knowledge/.env.example .env

# 配置你的知识源访问凭据
# 编辑 .env 文件，填入实际的 API 端点和访问令牌
```

### 2. 在 Spec-Kit 工作流中集成

#### 自动知识检索
- 每个 `@speckit specify` 命令执行前，自动查阅相关私域知识
- 按优先级检索：Deep-Wiki → MCP 服务 → 本地文档
- 智能缓存提高检索性能

#### 手动知识查询
```bash
# 通过 Aone Copilot 查询私域知识
@speckit knowledge "Spring AI Alibaba 最佳实践"
@speckit knowledge "微服务架构设计规范"
```

### 3. 知识源配置

#### Deep-Wiki 集成
- 自动搜索阿里巴巴内部技术文档
- 支持多种搜索模式和关键词匹配
- 实时获取最新的技术规范和最佳实践

#### MCP 服务集成
- 通过 Model Context Protocol 访问知识服务
- 支持领域特定知识检索和代码模式查询
- 提供架构设计指导和最佳实践建议

#### 本地文档备份
- 作为离线备份和项目特定知识存储
- 支持 Markdown、YAML、JSON 格式
- 自动索引和全文搜索

### 4. 检索策略

#### 级联模式 (默认)
1. 优先从 Deep-Wiki 检索
2. 如果结果不足，补充 MCP 服务结果
3. 最后使用本地文档作为备份

#### 并行模式
- 同时查询所有知识源
- 智能合并和去重结果
- 按相关性排序

#### 混合模式
- 结合级联和并行的优势
- 根据查询类型自动选择最佳策略

## 最佳实践

### 1. 知识维护
- **及时更新**: 项目完成后将新经验更新到本地文档
- **标准化**: 遵循统一的文档格式和标签规范
- **版本控制**: 重要知识变更需要版本记录

### 2. 检索优化
- **精确关键词**: 使用项目相关的专业术语
- **分层查询**: 从通用到具体逐步细化查询
- **缓存利用**: 相同查询会自动使用缓存结果

### 3. 安全考虑
- **访问控制**: 确保知识源访问令牌安全存储
- **数据分类**: 区分公开和内部敏感知识
- **审计日志**: 记录知识访问和使用情况

## 使用方式

### 1. 在 Spec-Kit 工作流中集成
- 每个 `@speckit specify` 命令执行前，自动查阅相关私域知识
- 在生成规范时，优先引用内部标准和最佳实践
- 实现计划必须符合私域知识要求

### 2. Aone Copilot 集成
- 代码实现前自动检查相关私域知识文档
- 技术选型优先考虑内部已验证方案
- 架构设计遵循阿里巴巴技术规范

### 3. 知识更新机制
- 项目完成后及时总结经验到团队经验库
- 发现新的最佳实践及时更新文档
- 定期 review 和更新过时的知识条目