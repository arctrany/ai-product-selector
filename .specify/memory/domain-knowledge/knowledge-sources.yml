# ç§åŸŸçŸ¥è¯†æºé…ç½®æ–‡ä»¶ - ç®€åŒ–ç‰ˆ

# çŸ¥è¯†æºè‡ªåŠ¨æ£€æµ‹å’Œä½¿ç”¨
knowledge_sources:
  # æ£€æµ‹é¡ºåºå’Œä¼˜å…ˆçº§
  detection_order:
    - deep_wiki      # å¦‚æœå­˜åœ¨ Deep-Wiki åˆ™ä¼˜å…ˆä½¿ç”¨
    - mcp_services   # å¦‚æœå­˜åœ¨ MCP çŸ¥è¯†æœåŠ¡åˆ™ä½¿ç”¨
    - local_docs     # æœ¬åœ°æ–‡æ¡£ä½œä¸ºå¤‡ä»½

  # Deep-Wiki æ£€æµ‹é…ç½®
  deep_wiki:
    auto_detect: true
    env_indicator: "DEEP_WIKI_AVAILABLE"  # ç¯å¢ƒå˜é‡æŒ‡ç¤ºæ˜¯å¦å¯ç”¨
    fallback_message: "Deep-Wiki ä¸å¯ç”¨ï¼Œä½¿ç”¨å…¶ä»–çŸ¥è¯†æº"

  # MCP æœåŠ¡æ£€æµ‹é…ç½®
  mcp_services:
    auto_detect: true
    env_indicator: "MCP_KNOWLEDGE_AVAILABLE"  # ç¯å¢ƒå˜é‡æŒ‡ç¤ºæ˜¯å¦å¯ç”¨
    fallback_message: "MCP çŸ¥è¯†æœåŠ¡ä¸å¯ç”¨ï¼Œä½¿ç”¨æœ¬åœ°æ–‡æ¡£"

  # æœ¬åœ°æ–‡æ¡£é…ç½®
  local_docs:
    always_available: true
    base_path: ".specify/memory/domain-knowledge/local-docs"

# ä½¿ç”¨ç­–ç•¥
usage_strategy:
  # è‡ªåŠ¨æ£€æµ‹å¯ç”¨çš„çŸ¥è¯†æº
  auto_detection: true

  # æ£€æµ‹å¤±è´¥æ—¶çš„æç¤ºä¿¡æ¯
  detection_messages:
    deep_wiki_available: "âœ… Deep-Wiki å¯ç”¨ï¼Œä¼˜å…ˆä½¿ç”¨å†…éƒ¨çŸ¥è¯†åº“"
    mcp_available: "âœ… MCP çŸ¥è¯†æœåŠ¡å¯ç”¨ï¼Œä½¿ç”¨æ™ºèƒ½çŸ¥è¯†æ£€ç´¢"
    local_only: "ğŸ“ ä½¿ç”¨æœ¬åœ°æ–‡æ¡£ä½œä¸ºçŸ¥è¯†æº"

  # Agent é›†æˆæç¤º
  agent_instructions:
    when_deep_wiki_available: "å·²æ£€æµ‹åˆ° Deep-Wiki å¯ç”¨ï¼Œè¯·ä¼˜å…ˆæŸ¥è¯¢å†…éƒ¨æŠ€æœ¯æ–‡æ¡£å’Œæœ€ä½³å®è·µ"
    when_mcp_available: "å·²æ£€æµ‹åˆ° MCP çŸ¥è¯†æœåŠ¡å¯ç”¨ï¼Œè¯·ä½¿ç”¨æ™ºèƒ½çŸ¥è¯†æ£€ç´¢è·å–ç›¸å…³ä¿¡æ¯"
    when_local_only: "å½“å‰ä»…æœ¬åœ°æ–‡æ¡£å¯ç”¨ï¼Œè¯·æŸ¥é˜…é¡¹ç›®å†…çš„çŸ¥è¯†åº“æ–‡æ¡£"

# æ£€ç´¢ç­–ç•¥é…ç½®
search_strategy:
  # æ£€ç´¢æ¨¡å¼: parallel(å¹¶è¡Œ) | cascade(çº§è”) | hybrid(æ··åˆ)
  mode: "cascade"
  
  # çº§è”æ¨¡å¼é…ç½®
  cascade:
    # å¦‚æœé«˜ä¼˜å…ˆçº§æºå¤±è´¥ï¼Œæ˜¯å¦ç»§ç»­å°è¯•ä½ä¼˜å…ˆçº§æº
    fallback_on_failure: true
    # å¦‚æœé«˜ä¼˜å…ˆçº§æºè¿”å›ç»“æœå°‘äºæ­¤é˜ˆå€¼ï¼Œæ˜¯å¦è¡¥å……ä½ä¼˜å…ˆçº§æºç»“æœ
    min_results_threshold: 3
    # æœ€å¤§æ€»ç»“æœæ•°
    max_total_results: 10

  # å¹¶è¡Œæ¨¡å¼é…ç½®
  parallel:
    # æ˜¯å¦åˆå¹¶æ‰€æœ‰æºçš„ç»“æœ
    merge_results: true
    # ç»“æœå»é‡ç­–ç•¥
    dedup_strategy: "content_similarity"
    # ç›¸ä¼¼åº¦é˜ˆå€¼ (0-1)
    similarity_threshold: 0.8

# ç¼“å­˜é…ç½®
cache:
  enabled: true
  ttl: 3600  # ç¼“å­˜æ—¶é—´ (ç§’)
  max_size: 1000  # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°
  storage: "memory"  # memory | file | redis

# ç»“æœå¤„ç†é…ç½®
result_processing:
  # æ˜¯å¦å¯¹ç»“æœè¿›è¡Œç›¸å…³æ€§æ’åº
  relevance_scoring: true
  # æ˜¯å¦åŒ…å«ç»“æœæ¥æºä¿¡æ¯
  include_source_info: true
  # ç»“æœæ ¼å¼: markdown | json | plain
  output_format: "markdown"
  # æ˜¯å¦è‡ªåŠ¨æå–å…³é”®ä¿¡æ¯
  auto_extract_key_info: true